<!DOCTYPE html>
<html>
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Nokogiri::XML::Searchable
  
    — Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css">

  <link rel="stylesheet" href="../../css/common.css" type="text/css">

<script type="text/javascript">
  pathId = "Nokogiri::XML::Searchable";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


      <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-1260604-8"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-1260604-8');
    </script>
</head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (S)</a> »
    <span class="title"><span class="object_link"><a href="../../Nokogiri.html" title="Nokogiri (module)">Nokogiri</a></span></span> » <span class="title"><span class="object_link"><a href="../XML.html" title="Nokogiri::XML (module)">XML</a></span></span>
     » 
    <span class="title">Searchable</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link" href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content">
<h1>Module: Nokogiri::XML::Searchable
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  
  <dl>
    <dt>Included in:</dt>
    <dd>
<span class="object_link"><a href="Node.html" title="Nokogiri::XML::Node (class)">Node</a></span>, <span class="object_link"><a href="NodeSet.html" title="Nokogiri::XML::NodeSet (class)">NodeSet</a></span>
</dd>
  </dl>
  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/nokogiri/xml/searchable.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2>
<div class="docstring">
  <div class="discussion">
    
<p>The Searchable module declares the interface used for searching your DOM.</p>

<pre class="code ruby"><code class="ruby">It implements the public methods `search`, `css`, and `xpath`,
as well as allowing specific implementations to specialize some
of the important behaviors.
</code></pre>


  </div>
</div>
<div class="tags">
  

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="LOOKS_LIKE_XPATH-constant" class="">LOOKS_LIKE_XPATH =
          <div class="docstring">
  <div class="discussion">
    
<p>Regular expression used by Searchable#search to determine if a query string is CSS or XPath</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class="tstring"><span class="regexp_beg">/</span><span class="tstring_content">^(\.\/|\/|\.\.|\.$)</span><span class="regexp_end">/</span></span></pre></dd>
      
    </dl>
  







  
    <h2>
      Searching via XPath or CSS Queries
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#at-instance_method" title="#at (instance method)">#<strong>at</strong>(*args)  ⇒ Object </a>
    

    
      (also: #%)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>call-seq: search *paths, [namespace-bindings, xpath-variable-bindings, custom-handler-class].</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#at_css-instance_method" title="#at_css (instance method)">#<strong>at_css</strong>(*args)  ⇒ Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>call-seq: css *rules, [namespace-bindings, custom-pseudo-class].</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#at_xpath-instance_method" title="#at_xpath (instance method)">#<strong>at_xpath</strong>(*args)  ⇒ Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>call-seq: xpath *paths, [namespace-bindings, variable-bindings, custom-handler-class].</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#css-instance_method" title="#css (instance method)">#<strong>css</strong>(*args)  ⇒ Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>call-seq: css *rules, [namespace-bindings, custom-pseudo-class].</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#search-instance_method" title="#search (instance method)">#<strong>search</strong>(*args)  ⇒ Object </a>
    

    
      (also: #/)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>call-seq: search *paths, [namespace-bindings, xpath-variable-bindings, custom-handler-class].</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#xpath-instance_method" title="#xpath (instance method)">#<strong>xpath</strong>(*args)  ⇒ Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline">
<p>call-seq: xpath *paths, [namespace-bindings, variable-bindings, custom-handler-class].</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="at-instance_method">
  
    #<strong>at</strong>(*args)  ⇒ <tt>Object</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id="%-instance_method">%</span></span>
    </span>
  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>call-seq: search *paths, [namespace-bindings, xpath-variable-bindings, custom-handler-class]</p>

<p>Search this object for <code>paths</code>, and return only the first result. <code>paths</code> must be one or more XPath or CSS queries.</p>

<p>See Searchable#search for more information.</p>


  </div>
</div>
<div class="tags">
  

</div>
<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


70
71
72</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nokogiri/xml/searchable.rb', line 70</span>

<span class="kw">def</span> <span class="id identifier rubyid_at">at</span><span class="lparen">(</span><span class="op">*</span><span class="id identifier rubyid_args">args</span><span class="rparen">)</span>
  <span class="id identifier rubyid_search">search</span><span class="lparen">(</span><span class="op">*</span><span class="id identifier rubyid_args">args</span><span class="rparen">)</span><span class="period">.</span><span class="id identifier rubyid_first">first</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="at_css-instance_method">
  
    #<strong>at_css</strong>(*args)  ⇒ <tt>Object</tt> 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>call-seq: css *rules, [namespace-bindings, custom-pseudo-class]</p>

<p>Search this object for CSS <code>rules</code>, and return only the first match. <code>rules</code> must be one or more CSS selectors.</p>

<p>See Searchable#css for more information.</p>


  </div>
</div>
<div class="tags">
  

</div>
<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


122
123
124</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nokogiri/xml/searchable.rb', line 122</span>

<span class="kw">def</span> <span class="id identifier rubyid_at_css">at_css</span><span class="lparen">(</span><span class="op">*</span><span class="id identifier rubyid_args">args</span><span class="rparen">)</span>
  <span class="id identifier rubyid_css">css</span><span class="lparen">(</span><span class="op">*</span><span class="id identifier rubyid_args">args</span><span class="rparen">)</span><span class="period">.</span><span class="id identifier rubyid_first">first</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="at_xpath-instance_method">
  
    #<strong>at_xpath</strong>(*args)  ⇒ <tt>Object</tt> 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>call-seq: xpath *paths, [namespace-bindings, variable-bindings, custom-handler-class]</p>

<p>Search this node for XPath <code>paths</code>, and return only the first match. <code>paths</code> must be one or more XPath queries.</p>

<p>See Searchable#xpath for more information.</p>


  </div>
</div>
<div class="tags">
  

</div>
<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


169
170
171</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nokogiri/xml/searchable.rb', line 169</span>

<span class="kw">def</span> <span class="id identifier rubyid_at_xpath">at_xpath</span><span class="lparen">(</span><span class="op">*</span><span class="id identifier rubyid_args">args</span><span class="rparen">)</span>
  <span class="id identifier rubyid_xpath">xpath</span><span class="lparen">(</span><span class="op">*</span><span class="id identifier rubyid_args">args</span><span class="rparen">)</span><span class="period">.</span><span class="id identifier rubyid_first">first</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="css-instance_method">
  
    #<strong>css</strong>(*args)  ⇒ <tt>Object</tt> 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>call-seq: css *rules, [namespace-bindings, custom-pseudo-class]</p>

<p>Search this object for CSS <code>rules</code>. <code>rules</code> must be one or more CSS selectors. For example:</p>

<pre class="code ruby"><code class="ruby"><span class="id identifier rubyid_node">node</span><span class="period">.</span><span class="id identifier rubyid_css">css</span><span class="lparen">(</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">title</span><span class="tstring_end">'</span></span><span class="rparen">)</span>
<span class="id identifier rubyid_node">node</span><span class="period">.</span><span class="id identifier rubyid_css">css</span><span class="lparen">(</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">body h1.bold</span><span class="tstring_end">'</span></span><span class="rparen">)</span>
<span class="id identifier rubyid_node">node</span><span class="period">.</span><span class="id identifier rubyid_css">css</span><span class="lparen">(</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">div + p.green</span><span class="tstring_end">'</span></span><span class="comma">,</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">div#one</span><span class="tstring_end">'</span></span><span class="rparen">)</span>
</code></pre>

<p>A hash of namespace bindings may be appended. For example:</p>

<pre class="code ruby"><code class="ruby"><span class="id identifier rubyid_node">node</span><span class="period">.</span><span class="id identifier rubyid_css">css</span><span class="lparen">(</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">bike|tire</span><span class="tstring_end">'</span></span><span class="comma">,</span> <span class="lbrace">{</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">bike</span><span class="tstring_end">'</span></span> <span class="op">=&gt;</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">http://schwinn.com/</span><span class="tstring_end">'</span></span><span class="rbrace">}</span><span class="rparen">)</span>
</code></pre>

<p>Custom CSS pseudo classes may also be defined.  To define custom pseudo classes, create a class and implement the custom pseudo class you want defined.  The first argument to the method will be the current matching NodeSet.  Any other arguments are ones that you pass in.  For example:</p>

<pre class="code ruby"><code class="ruby"><span class="id identifier rubyid_node">node</span><span class="period">.</span><span class="id identifier rubyid_css">css</span><span class="lparen">(</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">title:regex("\w+")</span><span class="tstring_end">'</span></span><span class="comma">,</span> <span class="const">Class</span><span class="period">.</span><span class="id identifier rubyid_new">new</span> <span class="lbrace">{</span>
  <span class="kw">def</span> <span class="id identifier rubyid_regex">regex</span> <span class="id identifier rubyid_node_set">node_set</span><span class="comma">,</span> <span class="id identifier rubyid_regex">regex</span>
    <span class="id identifier rubyid_node_set">node_set</span><span class="period">.</span><span class="id identifier rubyid_find_all">find_all</span> <span class="lbrace">{</span> <span class="op">|</span><span class="id identifier rubyid_node">node</span><span class="op">|</span> <span class="id identifier rubyid_node">node</span><span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">some_attribute</span><span class="tstring_end">'</span></span><span class="rbracket">]</span> <span class="op">=~</span> <span class="tstring"><span class="regexp_beg">/</span><span class="embexpr_beg">#{</span><span class="id identifier rubyid_regex">regex</span><span class="embexpr_end">}</span><span class="regexp_end">/</span></span> <span class="rbrace">}</span>
  <span class="kw">end</span>
<span class="rbrace">}</span><span class="period">.</span><span class="id identifier rubyid_new">new</span><span class="rparen">)</span>
</code></pre>

<p>Note that the CSS query string is case-sensitive with regards to your document type. That is, if you're looking for “H1” in an HTML document, you'll never find anything, since HTML tags will match only lowercase CSS queries. However, “H1” might be found in an XML document, where tags names are case-sensitive (e.g., “H1” is distinct from “h1”).</p>


  </div>
</div>
<div class="tags">
  

</div>
<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


109
110
111
112
113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nokogiri/xml/searchable.rb', line 109</span>

<span class="kw">def</span> <span class="id identifier rubyid_css">css</span><span class="lparen">(</span><span class="op">*</span><span class="id identifier rubyid_args">args</span><span class="rparen">)</span>
  <span class="id identifier rubyid_rules">rules</span><span class="comma">,</span> <span class="id identifier rubyid_handler">handler</span><span class="comma">,</span> <span class="id identifier rubyid_ns">ns</span><span class="comma">,</span> <span class="id identifier rubyid__">_</span> <span class="op">=</span> <span class="id identifier rubyid_extract_params">extract_params</span><span class="lparen">(</span><span class="id identifier rubyid_args">args</span><span class="rparen">)</span>

  <span class="id identifier rubyid_css_internal">css_internal</span> <span class="kw">self</span><span class="comma">,</span> <span class="id identifier rubyid_rules">rules</span><span class="comma">,</span> <span class="id identifier rubyid_handler">handler</span><span class="comma">,</span> <span class="id identifier rubyid_ns">ns</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="search-instance_method">
  
    #<strong>search</strong>(*args)  ⇒ <tt>Object</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id="/-instance_method">/</span></span>
    </span>
  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>call-seq: search *paths, [namespace-bindings, xpath-variable-bindings, custom-handler-class]</p>

<p>Search this object for <code>paths</code>. <code>paths</code> must be one or more XPath or CSS queries:</p>

<pre class="code ruby"><code class="ruby"><span class="id identifier rubyid_node">node</span><span class="period">.</span><span class="id identifier rubyid_search">search</span><span class="lparen">(</span><span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">div.employee</span><span class="tstring_end">"</span></span><span class="comma">,</span> <span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">.//title</span><span class="tstring_end">"</span></span><span class="rparen">)</span>
</code></pre>

<p>A hash of namespace bindings may be appended:</p>

<pre class="code ruby"><code class="ruby"><span class="id identifier rubyid_node">node</span><span class="period">.</span><span class="id identifier rubyid_search">search</span><span class="lparen">(</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">.//bike:tire</span><span class="tstring_end">'</span></span><span class="comma">,</span> <span class="lbrace">{</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">bike</span><span class="tstring_end">'</span></span> <span class="op">=&gt;</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">http://schwinn.com/</span><span class="tstring_end">'</span></span><span class="rbrace">}</span><span class="rparen">)</span>
<span class="id identifier rubyid_node">node</span><span class="period">.</span><span class="id identifier rubyid_search">search</span><span class="lparen">(</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">bike|tire</span><span class="tstring_end">'</span></span><span class="comma">,</span> <span class="lbrace">{</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">bike</span><span class="tstring_end">'</span></span> <span class="op">=&gt;</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">http://schwinn.com/</span><span class="tstring_end">'</span></span><span class="rbrace">}</span><span class="rparen">)</span>
</code></pre>

<p>For XPath queries, a hash of variable bindings may also be appended to the namespace bindings. For example:</p>

<pre class="code ruby"><code class="ruby"><span class="id identifier rubyid_node">node</span><span class="period">.</span><span class="id identifier rubyid_search">search</span><span class="lparen">(</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">.//address[@domestic=$value]</span><span class="tstring_end">'</span></span><span class="comma">,</span> <span class="kw">nil</span><span class="comma">,</span> <span class="lbrace">{</span><span class="symbol">:value</span> <span class="op">=&gt;</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">Yes</span><span class="tstring_end">'</span></span><span class="rbrace">}</span><span class="rparen">)</span>
</code></pre>

<p>Custom XPath functions and CSS pseudo-selectors may also be defined. To define custom functions create a class and implement the function you want to define.  The first argument to the method will be the current matching NodeSet.  Any other arguments are ones that you pass in.  Note that this class may appear anywhere in the argument list.  For example:</p>

<pre class="code ruby"><code class="ruby">node.search('.//title[regex(., "\w+")]', 'div.employee:regex("[0-9]+")'
  Class.new {
    def regex node_set, regex
      node_set.find_all { |node| node['some_attribute'] =~ /#{regex}/ }
    end
  }.new
)
</code></pre>

<p>See Searchable#xpath and Searchable#css for further usage help.</p>


  </div>
</div>
<div class="tags">
  

</div>
<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


51
52
53
54
55
56
57
58
59</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nokogiri/xml/searchable.rb', line 51</span>

<span class="kw">def</span> <span class="id identifier rubyid_search">search</span><span class="lparen">(</span><span class="op">*</span><span class="id identifier rubyid_args">args</span><span class="rparen">)</span>
  <span class="id identifier rubyid_paths">paths</span><span class="comma">,</span> <span class="id identifier rubyid_handler">handler</span><span class="comma">,</span> <span class="id identifier rubyid_ns">ns</span><span class="comma">,</span> <span class="id identifier rubyid_binds">binds</span> <span class="op">=</span> <span class="id identifier rubyid_extract_params">extract_params</span><span class="lparen">(</span><span class="id identifier rubyid_args">args</span><span class="rparen">)</span>

  <span class="id identifier rubyid_xpaths">xpaths</span> <span class="op">=</span> <span class="id identifier rubyid_paths">paths</span><span class="period">.</span><span class="id identifier rubyid_map">map</span><span class="lparen">(</span><span class="op">&amp;</span><span class="symbol">:to_s</span><span class="rparen">)</span><span class="period">.</span><span class="id identifier rubyid_map">map</span> <span class="kw">do</span> <span class="op">|</span><span class="id identifier rubyid_path">path</span><span class="op">|</span>
    <span class="lparen">(</span><span class="id identifier rubyid_path">path</span> <span class="op">=~</span> <span class="const"><span class="object_link"><a href="#LOOKS_LIKE_XPATH-constant" title="Nokogiri::XML::Searchable::LOOKS_LIKE_XPATH (constant)">LOOKS_LIKE_XPATH</a></span></span><span class="rparen">)</span> <span class="op">?</span> <span class="id identifier rubyid_path">path</span> <span class="op">:</span> <span class="id identifier rubyid_xpath_query_from_css_rule">xpath_query_from_css_rule</span><span class="lparen">(</span><span class="id identifier rubyid_path">path</span><span class="comma">,</span> <span class="id identifier rubyid_ns">ns</span><span class="rparen">)</span>
  <span class="kw">end</span><span class="period">.</span><span class="id identifier rubyid_flatten">flatten</span><span class="period">.</span><span class="id identifier rubyid_uniq">uniq</span>

  <span class="id identifier rubyid_xpath">xpath</span><span class="lparen">(</span><span class="op">*</span><span class="lparen">(</span><span class="id identifier rubyid_xpaths">xpaths</span> <span class="op">+</span> <span class="lbracket">[</span><span class="id identifier rubyid_ns">ns</span><span class="comma">,</span> <span class="id identifier rubyid_handler">handler</span><span class="comma">,</span> <span class="id identifier rubyid_binds">binds</span><span class="rbracket">]</span><span class="period">.</span><span class="id identifier rubyid_compact">compact</span><span class="rparen">)</span><span class="rparen">)</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="xpath-instance_method">
  
    #<strong>xpath</strong>(*args)  ⇒ <tt>Object</tt> 
  

  

  
</h3>
<div class="docstring">
  <div class="discussion">
    
<p>call-seq: xpath *paths, [namespace-bindings, variable-bindings, custom-handler-class]</p>

<p>Search this node for XPath <code>paths</code>. <code>paths</code> must be one or more XPath queries.</p>

<pre class="code ruby"><code class="ruby"><span class="id identifier rubyid_node">node</span><span class="period">.</span><span class="id identifier rubyid_xpath">xpath</span><span class="lparen">(</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">.//title</span><span class="tstring_end">'</span></span><span class="rparen">)</span>
</code></pre>

<p>A hash of namespace bindings may be appended. For example:</p>

<pre class="code ruby"><code class="ruby"><span class="id identifier rubyid_node">node</span><span class="period">.</span><span class="id identifier rubyid_xpath">xpath</span><span class="lparen">(</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">.//foo:name</span><span class="tstring_end">'</span></span><span class="comma">,</span> <span class="lbrace">{</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">foo</span><span class="tstring_end">'</span></span> <span class="op">=&gt;</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">http://example.org/</span><span class="tstring_end">'</span></span><span class="rbrace">}</span><span class="rparen">)</span>
<span class="id identifier rubyid_node">node</span><span class="period">.</span><span class="id identifier rubyid_xpath">xpath</span><span class="lparen">(</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">.//xmlns:name</span><span class="tstring_end">'</span></span><span class="comma">,</span> <span class="id identifier rubyid_node">node</span><span class="period">.</span><span class="id identifier rubyid_root">root</span><span class="period">.</span><span class="id identifier rubyid_namespaces">namespaces</span><span class="rparen">)</span>
</code></pre>

<p>A hash of variable bindings may also be appended to the namespace bindings. For example:</p>

<pre class="code ruby"><code class="ruby"><span class="id identifier rubyid_node">node</span><span class="period">.</span><span class="id identifier rubyid_xpath">xpath</span><span class="lparen">(</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">.//address[@domestic=$value]</span><span class="tstring_end">'</span></span><span class="comma">,</span> <span class="kw">nil</span><span class="comma">,</span> <span class="lbrace">{</span><span class="symbol">:value</span> <span class="op">=&gt;</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">Yes</span><span class="tstring_end">'</span></span><span class="rbrace">}</span><span class="rparen">)</span>
</code></pre>

<p>Custom XPath functions may also be defined.  To define custom functions create a class and implement the function you want to define.  The first argument to the method will be the current matching NodeSet.  Any other arguments are ones that you pass in.  Note that this class may appear anywhere in the argument list.  For example:</p>

<pre class="code ruby"><code class="ruby"><span class="id identifier rubyid_node">node</span><span class="period">.</span><span class="id identifier rubyid_xpath">xpath</span><span class="lparen">(</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">.//title[regex(., "\w+")]</span><span class="tstring_end">'</span></span><span class="comma">,</span> <span class="const">Class</span><span class="period">.</span><span class="id identifier rubyid_new">new</span> <span class="lbrace">{</span>
  <span class="kw">def</span> <span class="id identifier rubyid_regex">regex</span> <span class="id identifier rubyid_node_set">node_set</span><span class="comma">,</span> <span class="id identifier rubyid_regex">regex</span>
    <span class="id identifier rubyid_node_set">node_set</span><span class="period">.</span><span class="id identifier rubyid_find_all">find_all</span> <span class="lbrace">{</span> <span class="op">|</span><span class="id identifier rubyid_node">node</span><span class="op">|</span> <span class="id identifier rubyid_node">node</span><span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">some_attribute</span><span class="tstring_end">'</span></span><span class="rbracket">]</span> <span class="op">=~</span> <span class="tstring"><span class="regexp_beg">/</span><span class="embexpr_beg">#{</span><span class="id identifier rubyid_regex">regex</span><span class="embexpr_end">}</span><span class="regexp_end">/</span></span> <span class="rbrace">}</span>
  <span class="kw">end</span>
<span class="rbrace">}</span><span class="period">.</span><span class="id identifier rubyid_new">new</span><span class="rparen">)</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div>
<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


156
157
158
159
160</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/nokogiri/xml/searchable.rb', line 156</span>

<span class="kw">def</span> <span class="id identifier rubyid_xpath">xpath</span><span class="lparen">(</span><span class="op">*</span><span class="id identifier rubyid_args">args</span><span class="rparen">)</span>
  <span class="id identifier rubyid_paths">paths</span><span class="comma">,</span> <span class="id identifier rubyid_handler">handler</span><span class="comma">,</span> <span class="id identifier rubyid_ns">ns</span><span class="comma">,</span> <span class="id identifier rubyid_binds">binds</span> <span class="op">=</span> <span class="id identifier rubyid_extract_params">extract_params</span><span class="lparen">(</span><span class="id identifier rubyid_args">args</span><span class="rparen">)</span>

  <span class="id identifier rubyid_xpath_internal">xpath_internal</span> <span class="kw">self</span><span class="comma">,</span> <span class="id identifier rubyid_paths">paths</span><span class="comma">,</span> <span class="id identifier rubyid_handler">handler</span><span class="comma">,</span> <span class="id identifier rubyid_ns">ns</span><span class="comma">,</span> <span class="id identifier rubyid_binds">binds</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Aug 10 15:34:52 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-3.0.1).
</div>

    </div>
  </body>
</html>
